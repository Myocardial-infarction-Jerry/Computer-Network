# Homework-3

*21307289 刘森元*

## Prob. 1

在IP首部中，用于确保一个分组的转发不超过N台路由器的字段是生存时间（Time to Live，TTL）。TTL字段指定了一个分组在网络中可以经过的最大路由器数量，每经过一个路由器，TTL值就会减少1，当TTL值减到0时，分组将被丢弃。

## Prob. 2

对于内存、总线和纵横式交换结构，一个分组的最大时延分别是：
- 内存交换结构：最大时延为(n-1)D
- 总线交换结构：最大时延为(n-1)D
- 纵横式交换结构：最大时延为0

其中，D表示一个分组在交换结构中传输所需的时间。

## Prob. 3

根据给定的转发表，对于每个接口，相应的目的主机地址的范围和地址数量如下：
- 接口0：目的主机地址范围为0.0.0.0 - 0.127.255.255，共有128*256*256*256=2,147,483,648个地址。
- 接口1：目的主机地址范围为10.0.0.0 - 10.255.255.255，共有256*256*256=16,777,216个地址。
- 接口2：目的主机地址范围为111.0.0.0 - 111.255.255.255，共有256*256*256=16,777,216个地址。
- 接口3：目的主机地址范围为除上述范围外的所有地址，共有4,294,967,296 - (2,147,483,648 + 16,777,216 + 16,777,216) = 1,054,912,216个地址。

## Prob. 4

对于具有前缀128.119.40.128/26的子网，一个可分配的IP地址的例子可以是128.119.40.130。

对于ISP拥有的地址块128.119.40.64/26，要生成4个具有相同数量IP地址的子网，每个子网的前缀如下：
- 子网1：128.119.40.64/28
- 子网2：128.119.40.80/28
- 子网3：128.119.40.96/28
- 子网4：128.119.40.112/28

## Prob. 5

a.分配家庭网络中的接口地址如下：

|  接口  |   IP地址    |
| :----: | :---------: |
| 主机1  | 192.168.1.1 |
| 主机2  | 192.168.1.2 |
| 主机3  | 192.168.1.3 |
| 路由器 | 192.168.1.4 |

b.建立NAT转换表如下：

|        WAN端        |       LAN端       |
| :-----------------: | :---------------: |
| 24.34.112.235，5001 | 192.168.1.1，3345 |
| 24.34.112.235，5002 | 192.168.1.1，3346 |
| 24.34.112.235，5003 | 192.168.1.2，3345 |
| 24.34.112.235，5004 | 192.168.1.2，3346 |
| 24.34.112.235，5005 | 192.168.1.3，3345 |
| 24.34.112.235，5006 | 192.168.1.3，3346 |

## Prob. 6

***s2**的流表项*

| MATCH                                                        | ACTION     |
| ------------------------------------------------------------ | ---------- |
| **期望1**                                                    |            |
| IP src = 10.3.\*.\*<br />ingress port = 1<br />IP dst = 10.1.\*.\* | forward(2) |
| **期望2**                                                    |            |
| IP src = 10.1.\*.\*<br />ingress port = 2<br />IP dst = 10.3.\*.\* | forward(1) |
| **期望3**                                                    |            |
| ingress port = 1<br />IP dst = 10.2.0.4                      | forward(4) |
| ingress port = 2<br />IP dst = 10.2.0.4                      | forward(4) |
| ingress port = 1<br />IP dst = 10.2.0.3                      | forward(3) |
| ingress port = 2<br />IP dst = 10.2.0.3                      | forward(3) |
| **期望4**                                                    |            |
| ingress port = 3<br />IP dst = 10.2.0.4                      | forward(4) |
| ingress port = 4<br />IP dst = 10.2.0.3                      | forward(3) |

